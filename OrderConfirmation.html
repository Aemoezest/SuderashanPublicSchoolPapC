<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Order Confirmation</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #ffb347, #ffcc33);
    color: #333;
    text-align: center;
    margin: 0;
    padding: 50px 20px;
  }

  .container {
    background: white;
    max-width: 600px;
    margin: auto;
    padding: 40px 30px;
    border-radius: 20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    animation: fadeIn 0.8s ease;
  }

  h1 {
    color: #e67e22;
    font-size: 2em;
    margin-bottom: 10px;
  }

  h3 {
    margin-top: 0;
    color: #555;
  }

  .details {
    margin-top: 25px;
    text-align: left;
    background: #fff9e6;
    padding: 20px;
    border-radius: 12px;
    font-size: 16px;
  }

  .details p {
    margin: 8px 0;
  }

  .note {
    margin-top: 25px;
    font-size: 15px;
    color: #555;
    background: #fff3cd;
    padding: 12px;
    border-radius: 8px;
  }

  button {
    background: #e67e22;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 10px;
    margin: 10px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  button:hover {
    background: #d35400;
  }

  #trackingId {
    font-weight: bold;
    color: #d35400;
    font-size: 18px;
    letter-spacing: 1px;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<div class="container">
  <h1>‚úÖ Order Confirmed!</h1>
  <h3>Thank you for your order!</h3>

  <div class="details">
    <p><strong>Item:</strong> <span id="itemName">Loading...</span></p>
    <p><strong>Type:</strong> <span id="itemType">Loading...</span></p>
    <p><strong>Price:</strong> ‚Çπ<span id="itemPrice">Loading...</span></p>
    <p><strong>Tracking ID:</strong> <span id="trackingId">Generating...</span></p>
    <p><strong>Status:</strong> <span id="orderStatus">Active (Processing)</span></p>
  </div>

  <div class="note">
    <ul style="text-align:left; display:inline-block;">
      <li>Your tracking ID is shown above. Save it for tracking your order.</li>
      <li>Your order will arrive in about <strong>5 days</strong>.</li>
      <li>Click below if you want to cancel your order.</li>
    </ul>
  </div>

  <div style="margin-top:25px;">
    <button id="cancelOrder">‚ùå Cancel Order</button>
    <button onclick="window.location.href='index.html'">üè™ Back to Store</button>
  </div>

  <p style="margin-top:25px; color:#444;">You can close this page safely now.</p>
</div>

<script>
const webhookURL = "https://discord.com/api/webhooks/1422839520977621012/dmCTctd81k-0KjhaTjHkBY80BM4qgAzV2amKGZy856J2xzg8-fIQ_TukZfnxbUGJvwVI";

window.onload = () => {
  const params = new URLSearchParams(window.location.search);
  const product = params.get("product");
  const type = params.get("type");
  const price = params.get("price");

  // Generate Tracking ID
  const trackingId = "TRK" + Math.floor(Math.random() * 1000000);

  // Save order details
  localStorage.setItem("selectedItem", product);
  localStorage.setItem("selectedType", type);
  localStorage.setItem("selectedPrice", price);
  localStorage.setItem("trackingId", trackingId);
  localStorage.setItem("orderStatus", "Active");

  // Display order details
  document.getElementById("itemName").textContent = product;
  document.getElementById("itemType").textContent = type;
  document.getElementById("itemPrice").textContent = price;
  document.getElementById("trackingId").textContent = trackingId;
  document.getElementById("orderStatus").textContent = "‚úÖ Active (Processing)";

  // Send order info to Discord
  fetch(webhookURL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      content: `üßæ **New Order Placed!**\n**Item:** ${product}\n**Type:** ${type}\n**Price:** ‚Çπ${price}\n**Tracking ID:** ${trackingId}`
    })
  });
};

// Cancel order
document.getElementById("cancelOrder").addEventListener("click", () => {
  const product = localStorage.getItem("selectedItem");
  const trackingId = localStorage.getItem("trackingId");

  localStorage.setItem("orderStatus", "Cancelled");

  fetch(webhookURL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      content: `‚ùå **Order Cancelled from Confirmation Page**\n**Item:** ${product || "Unknown"}\n**Tracking ID:** ${trackingId || "Unknown"}`
    })
  }).then(() => {
    document.getElementById("orderStatus").textContent = "‚ùå Cancelled";
    alert("Your order has been cancelled.");
  });
});
</script>

</body>
</html>
