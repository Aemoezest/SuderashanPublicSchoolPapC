<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Confirm Your PaperCraft Order</title>
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #ff9a9e, #fecfef);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}
.container {
  background: white;
  padding: 30px 40px;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  text-align: center;
  max-width: 400px;
}
h1 {
  color: #ff4d4d;
  font-size: 28px;
  margin-bottom: 15px;
}
input {
  width: 90%;
  padding: 12px;
  margin: 8px 0;
  border: 1px solid #ddd;
  border-radius: 10px;
  font-size: 16px;
}
button {
  background: #ff4d4d;
  color: white;
  border: none;
  padding: 12px 20px;
  font-size: 18px;
  border-radius: 10px;
  cursor: pointer;
  transition: background 0.3s;
}
button:hover {
  background: #ff1a1a;
}
.back-btn {
  background: gray;
  margin-top: 10px;
}
.back-btn:hover {
  background: #666;
}
.details {
  margin: 20px 0;
  text-align: left;
  font-size: 16px;
  background: #fff8f8;
  padding: 15px;
  border-radius: 10px;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
}
</style>
</head>
<body>

<div class="container">
  <h1>Confirm Your Order</h1>

  <div class="details" id="orderDetails"></div>

  <form id="orderForm">
    <input type="text" id="name" placeholder="Your Name" required><br>
    <input type="text" id="class" placeholder="Class" required><br>
    <input type="text" id="phone" placeholder="Phone Number (optional)"><br>
    <button type="button" onclick="placeOrder()">Place Order</button>
  </form>

  <button class="back-btn" onclick="window.history.back()">‚Üê Back</button>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const product = params.get("product");
const type = params.get("type");
const price = params.get("price");

document.getElementById("orderDetails").innerHTML = `
  <strong>Product:</strong> ${product}<br>
  <strong>Type:</strong> ${type}<br>
  <strong>Price:</strong> ‚Çπ${price}
`;

function generateTrackingId() {
  return 'TRK-' + Math.random().toString(36).substring(2, 10).toUpperCase();
}

function placeOrder() {
  const name = document.getElementById('name').value.trim();
  const cls = document.getElementById('class').value.trim();
  const phone = document.getElementById('phone').value.trim();
  if (!name || !cls) {
    alert("Please enter your name and class!");
    return;
  }

  const trackingId = generateTrackingId();

  const webhookURL = "https://discord.com/api/webhooks/1422839520977621012/dmCTctd81k-0KjhaTjHkBY80BM4qgAzV2amKGZy856J2xzg8-fIQ_TukZfnxbUGJvwVI";
  const data = {
    content: `üì¶ **New Order Received!**\n\nüë§ Name: ${name}\nüè´ Class: ${cls}\nüìû Phone: ${phone || "Not Provided"}\nüß© Product: ${product}\nüõ† Type: ${type}\nüí∞ Price: ‚Çπ${price}\nüîñ Tracking ID: ${trackingId}`
  };

  fetch(webhookURL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  })
  .then(() => {
    window.location.href = `OrderConfirmation.html?tracking=${trackingId}&product=${encodeURIComponent(product)}&type=${encodeURIComponent(type)}&price=${price}`;
  })
  .catch(() => alert("Failed to send order. Please try again later."));
}
</script>
</body>
</html>
